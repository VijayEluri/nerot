<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
  	<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
  	<meta name="description" content="Nerot: Java scheduled caching of any Java instance methods and static methods with built-in RSS and HTTP GET support." />
  	<meta name="keywords" content="nerot, java, scheduled, cache, caching, rss, http get, instance, static, method, reflection" />
    <link rel="stylesheet" type="text/css" href="./css/main.css" />
    <title>Nerot</title>
  </head>
  <body>
    <div id="container">
      <div id="content">
        <div class="underlinemenu">
        <ul>
        <li><a href="index.html">Documentation</a></li>
        <li><a href="releases/index.html">Download</a></li>
        <li><a href="http://github.com/garysweaver/nerot">Source</a></li>
        <li><a href="apidocs/index.html">API</a></li>
        </ul>
        </div>
        <h1>Nerot</h1>
        
        <h2>Scheduled Caching Made Simple</h2>
        
        Add this dependency to your pom.xml:
        <pre class="config">
&lt;dependency&gt;
    &lt;groupId&gt;nerot&lt;/groupId&gt;
    &lt;artifactId&gt;nerot&lt;/artifactId&gt;
    &lt;version&gt;3.3&lt;/version&gt;
&lt;/dependency&gt;</pre>
        Add this repository to your pom.xml:
        <pre class="config">
&lt;repository&gt;
    &lt;id&gt;nerot-repository&lt;/id&gt;
    &lt;name&gt;Nerot Repository&lt;/name&gt;
    &lt;url&gt;http://garysweaver.github.com/nerot/m2/releases&lt;/url&gt;
&lt;/repository&gt;</pre>
        Add the bean definitions in <a href="http://github.com/garysweaver/nerot/blob/master/src/main/resources/nerot.xml">nerot.xml</a> to your application's context:
        <pre class="config">
&lt;bean name=&quot;nerotScheduleFactory&quot; 
      class=&quot;org.springframework.scheduling.quartz.SchedulerFactoryBean&quot;&gt;
   &lt;property name=&quot;waitForJobsToCompleteOnShutdown&quot; value=&quot;false&quot;/&gt;
&lt;/bean&gt;

&lt;bean name=&quot;nerotStore&quot; class=&quot;nerot.store.MemoryStore&quot; /&gt;

&lt;bean name=&quot;nerot&quot; class=&quot;nerot.Nerot&quot;&gt;
   &lt;property name=&quot;scheduler&quot; ref=&quot;nerotScheduleFactory&quot;/&gt;
   &lt;property name=&quot;store&quot; ref=&quot;nerotStore&quot;/&gt;
&lt;/bean&gt;</pre>

        Add Nerot to your class:<br/><br/>
        <div class="code_example">
          <pre class="code">
import nerot.Nerot;

public class SomeClass {
  
  private Nerot nerot;
                
  public void setNerot(Nerot nerot) {
    this.nerot = nerot;
  }
}
          </pre>
        </div>
        
        Set Nerot on your bean:
        <pre class="config">
&lt;bean name=&quot;someClass&quot; class=&quot;SomeClass&quot;&gt;
    &lt;property name=&quot;nerot&quot; ref=&quot;nerot&quot;/&gt;
&lt;/bean&gt;</pre>
        
        <h2>Defining a Schedule is Simple and Flexible</h2>
                
        <p>
          You can schedule refresh of the cache either via interval in milliseconds or Quartz <a href="http://www.quartz-scheduler.org/docs/tutorials/crontrigger.html">CronTrigger syntax</a> (similar to <a href="http://en.wikipedia.org/wiki/Cron">cron</a> syntax).
        </p>
        
        <h2>RSS Feed Retrieval</h2>
        
        <div class="code_example">
          <pre class="code">
<span class="comment">// Get RSS feed every 15 seconds and cache if no error</span>
nerot.scheduleRss(url, "0/15 * * * * ?");

<span class="comment">// Retrieve the result from in-memory cache without delay</span>
SyndFeed feed = nerot.getRssFromStore(url);
          </pre>
        </div>
        
        <h2>Webpage Retrieval</h2>
        
        <div class="code_example">
          <pre class="code">
<span class="comment">// Get webpage every 60 seconds and cache if no error</span>
nerot.scheduleHttpGet(url, 60000L);

<span class="comment">// Retrieve the result from in-memory cache without delay</span>
String page = nerot.getHttpResponseBodyFromStore(url);
          </pre>
        </div>        
        
        <h2>Static Methods</h2>
        
        <div class="code_example">
          <pre class="code">
<span class="comment">// Define Math.random()</span>
GenericTask task = new GenericTask();
task.setStoreKey(key);
task.setActor(Math.class);
task.setMethod("random");

<span class="comment">// Call Math.random() every 15 seconds</span>
nerot.schedule("myJob", task, 15000L);

<span class="comment">// Retrieve the result from in-memory cache without delay</span>
Double random = (Double)nerot.getResultFromStore(key);
          </pre>
        </div>
        
        <h2>Instance Methods</h2>
        
        <div class="code_example">
          <pre class="code">
<span class="comment">// Define reporter.generate(...)</span>
GenericTask task = new GenericTask();
task.setStoreKey(key);
task.setActor(new Reporter());
task.setMethod("generate");
task.setArgs(new Object[]{"s", y, true, 'c', 1.0D});

<span class="comment">// Call report.generate(...) at 9:15pm every day</span>
nerot.schedule("myJob", task, "0 15 21 * * ?");

<span class="comment">// Retrieve the result from in-memory cache without delay</span>
Report stats = (Report)nerot.getResultFromStore(key);
          </pre>
        </div>
        
        <h2>Schedule Methods via Spring Beans</h2>
        
        Nerot includes <a href="http://github.com/garysweaver/nerot/tree/master/src/main/java/nerot/spring">classes</a> for each type of schedule comment that schedule Nerot when the Spring beans is configured in the context. Just define a bean in the root application context and then get the result programmatically in the child context. Easy!
        
        <pre class="config">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:p=&quot;http://www.springframework.org/schema/p&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
       xsi:schemaLocation=&quot;
         http://www.springframework.org/schema/beans 
         http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
         http://www.springframework.org/schema/context 
         http://www.springframework.org/schema/context/spring-context-2.5.xsd
         http://www.springframework.org/schema/tx 
         http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;

    &lt;context:annotation-config /&gt;

    &lt;bean name=&quot;rssCronScheduler&quot; class=&quot;nerot.spring.RssCronScheduler&quot;&gt;
        &lt;property name=&quot;url&quot; value=&quot;http://news.acme.com/rss&quot;/&gt;
        &lt;property name=&quot;cronSchedule&quot; value=&quot;0/1 * * * * ?&quot;/&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</pre>

        <div class="code_example">
          <pre class="code">
<span class="comment">// Retrieve the result from in-memory cache without delay</span>
SyndFeed feed = nerot.getRssFromStore("http://news.acme.com/rss");
        </pre>                         
      </div>
        
      <div id="footer">
        <div id="copyright">
          Copyright (c) 2010 Gary S. Weaver, released under the <a href="http://github.com/garysweaver/nerot/blob/master/LICENSE">MIT license</a>.
          <a href="http://github.com/garysweaver/nerot"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>
       </div>
      </div>
    </div>
  </body>
</html>
